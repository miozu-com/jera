/**
 * Jera Design Tokens
 *
 * A minimal, semantic token system based on Base16 color architecture.
 * Designed for light/dark themes with automatic switching.
 *
 * Usage:
 *   @import '@miozu/jera/tokens';
 *
 * Then use with Tailwind:
 *   class="bg-surface text-primary"
 *
 * Or with CSS:
 *   background: var(--color-surface);
 */

/* ============================================
   LIGHT THEME (Default)
   ============================================ */
:root,
:root[data-theme='light'] {
  /* === Grayscale (Background â†’ Foreground) === */
  --color-bg:           #ffffff;  /* Page background */
  --color-surface:      #f8f9fa;  /* Cards, panels */
  --color-surface-alt:  #f1f3f5;  /* Elevated/nested surfaces */
  --color-border:       #dee2e6;  /* Borders, dividers */
  --color-muted:        #868e96;  /* Disabled, placeholder, hints */
  --color-text:         #495057;  /* Primary text */
  --color-text-strong:  #212529;  /* Headings, emphasis */
  --color-text-max:     #0d0f10;  /* Maximum contrast */

  /* === Semantic Accents === */
  --color-error:        #dc3545;  /* Errors, destructive actions */
  --color-warning:      #fd7e14;  /* Warnings, caution */
  --color-success:      #28a745;  /* Success, positive */
  --color-info:         #17a2b8;  /* Informational */
  --color-highlight:    #ffc107;  /* Highlights, badges */
  --color-primary:      #2563eb;  /* Primary brand, CTAs */
  --color-secondary:    #7c3aed;  /* Secondary brand */
  --color-accent:       #d97706;  /* Tertiary accent */

  /* === RGB Variants (for opacity) === */
  --color-bg-rgb:       255, 255, 255;
  --color-surface-rgb:  248, 249, 250;
  --color-text-rgb:     73, 80, 87;
  --color-primary-rgb:  37, 99, 235;
  --color-error-rgb:    220, 53, 69;
  --color-success-rgb:  40, 167, 69;

  /* === Interactive States === */
  --color-focus:        var(--color-primary);
  --color-focus-ring:   rgba(var(--color-primary-rgb), 0.25);
  --color-hover:        rgba(0, 0, 0, 0.04);
  --color-active:       rgba(0, 0, 0, 0.08);
  --color-selected:     rgba(var(--color-primary-rgb), 0.08);

  /* === Shadows === */
  --shadow-xs:   0 1px 2px rgba(0, 0, 0, 0.05);
  --shadow-sm:   0 1px 3px rgba(0, 0, 0, 0.1), 0 1px 2px rgba(0, 0, 0, 0.06);
  --shadow-md:   0 4px 6px rgba(0, 0, 0, 0.1), 0 2px 4px rgba(0, 0, 0, 0.06);
  --shadow-lg:   0 10px 15px rgba(0, 0, 0, 0.1), 0 4px 6px rgba(0, 0, 0, 0.05);
  --shadow-xl:   0 20px 25px rgba(0, 0, 0, 0.1), 0 10px 10px rgba(0, 0, 0, 0.04);
  --shadow-inner: inset 0 2px 4px rgba(0, 0, 0, 0.06);

  /* === Typography === */
  --font-sans:   'Inter', ui-sans-serif, system-ui, -apple-system, sans-serif;
  --font-serif:  'Georgia', ui-serif, serif;
  --font-mono:   'JetBrains Mono', ui-monospace, monospace;

  --text-xs:     0.75rem;    /* 12px */
  --text-sm:     0.875rem;   /* 14px */
  --text-base:   1rem;       /* 16px */
  --text-lg:     1.125rem;   /* 18px */
  --text-xl:     1.25rem;    /* 20px */
  --text-2xl:    1.5rem;     /* 24px */
  --text-3xl:    1.875rem;   /* 30px */
  --text-4xl:    2.25rem;    /* 36px */

  --leading-tight:   1.25;
  --leading-snug:    1.375;
  --leading-normal:  1.5;
  --leading-relaxed: 1.625;

  /* === Spacing === */
  --space-0:     0;
  --space-1:     0.25rem;    /* 4px */
  --space-2:     0.5rem;     /* 8px */
  --space-3:     0.75rem;    /* 12px */
  --space-4:     1rem;       /* 16px */
  --space-5:     1.25rem;    /* 20px */
  --space-6:     1.5rem;     /* 24px */
  --space-8:     2rem;       /* 32px */
  --space-10:    2.5rem;     /* 40px */
  --space-12:    3rem;       /* 48px */
  --space-16:    4rem;       /* 64px */

  /* === Border Radius === */
  --radius-none: 0;
  --radius-sm:   0.125rem;   /* 2px */
  --radius-md:   0.25rem;    /* 4px */
  --radius-lg:   0.5rem;     /* 8px */
  --radius-xl:   0.75rem;    /* 12px */
  --radius-2xl:  1rem;       /* 16px */
  --radius-full: 9999px;

  /* === Transitions === */
  --duration-fast:   100ms;
  --duration-base:   150ms;
  --duration-slow:   300ms;
  --duration-slower: 500ms;

  --ease-default:    cubic-bezier(0.4, 0, 0.2, 1);
  --ease-in:         cubic-bezier(0.4, 0, 1, 1);
  --ease-out:        cubic-bezier(0, 0, 0.2, 1);
  --ease-bounce:     cubic-bezier(0.68, -0.55, 0.265, 1.55);

  /* === Z-Index Scale === */
  --z-dropdown:  100;
  --z-sticky:    200;
  --z-modal:     300;
  --z-popover:   400;
  --z-toast:     500;
  --z-tooltip:   600;
}

/* ============================================
   DARK THEME
   ============================================ */
:root[data-theme='dark'] {
  /* === Grayscale (Dark backgrounds) === */
  --color-bg:           #0f1419;
  --color-surface:      #1a1f26;
  --color-surface-alt:  #242a33;
  --color-border:       #3d4551;
  --color-muted:        #6b7280;
  --color-text:         #d1d5db;
  --color-text-strong:  #f3f4f6;
  --color-text-max:     #ffffff;

  /* === Semantic Accents (Brighter for dark bg) === */
  --color-error:        #f87171;
  --color-warning:      #fb923c;
  --color-success:      #4ade80;
  --color-info:         #38bdf8;
  --color-highlight:    #facc15;
  --color-primary:      #60a5fa;
  --color-secondary:    #a78bfa;
  --color-accent:       #fbbf24;

  /* === RGB Variants === */
  --color-bg-rgb:       15, 20, 25;
  --color-surface-rgb:  26, 31, 38;
  --color-text-rgb:     209, 213, 219;
  --color-primary-rgb:  96, 165, 250;
  --color-error-rgb:    248, 113, 113;
  --color-success-rgb:  74, 222, 128;

  /* === Interactive States === */
  --color-hover:        rgba(255, 255, 255, 0.04);
  --color-active:       rgba(255, 255, 255, 0.08);
  --color-selected:     rgba(var(--color-primary-rgb), 0.15);

  /* === Shadows (More subtle in dark mode) === */
  --shadow-xs:   0 1px 2px rgba(0, 0, 0, 0.2);
  --shadow-sm:   0 1px 3px rgba(0, 0, 0, 0.3), 0 1px 2px rgba(0, 0, 0, 0.2);
  --shadow-md:   0 4px 6px rgba(0, 0, 0, 0.3), 0 2px 4px rgba(0, 0, 0, 0.2);
  --shadow-lg:   0 10px 15px rgba(0, 0, 0, 0.3), 0 4px 6px rgba(0, 0, 0, 0.2);
  --shadow-xl:   0 20px 25px rgba(0, 0, 0, 0.4), 0 10px 10px rgba(0, 0, 0, 0.2);
}

/* ============================================
   TAILWIND 4 THEME INTEGRATION
   ============================================ */
@theme {
  /* Map CSS variables to Tailwind utilities */

  /* Colors */
  --color-bg: var(--color-bg);
  --color-surface: var(--color-surface);
  --color-surface-alt: var(--color-surface-alt);
  --color-border: var(--color-border);
  --color-muted: var(--color-muted);
  --color-text: var(--color-text);
  --color-text-strong: var(--color-text-strong);
  --color-text-max: var(--color-text-max);

  --color-error: var(--color-error);
  --color-warning: var(--color-warning);
  --color-success: var(--color-success);
  --color-info: var(--color-info);
  --color-highlight: var(--color-highlight);
  --color-primary: var(--color-primary);
  --color-secondary: var(--color-secondary);
  --color-accent: var(--color-accent);

  /* Spacing */
  --spacing-0: var(--space-0);
  --spacing-1: var(--space-1);
  --spacing-2: var(--space-2);
  --spacing-3: var(--space-3);
  --spacing-4: var(--space-4);
  --spacing-5: var(--space-5);
  --spacing-6: var(--space-6);
  --spacing-8: var(--space-8);
  --spacing-10: var(--space-10);
  --spacing-12: var(--space-12);
  --spacing-16: var(--space-16);

  /* Border Radius */
  --radius-sm: var(--radius-sm);
  --radius-md: var(--radius-md);
  --radius-lg: var(--radius-lg);
  --radius-xl: var(--radius-xl);
  --radius-2xl: var(--radius-2xl);
  --radius-full: var(--radius-full);

  /* Shadows */
  --shadow-xs: var(--shadow-xs);
  --shadow-sm: var(--shadow-sm);
  --shadow-md: var(--shadow-md);
  --shadow-lg: var(--shadow-lg);
  --shadow-xl: var(--shadow-xl);

  /* Typography */
  --font-sans: var(--font-sans);
  --font-serif: var(--font-serif);
  --font-mono: var(--font-mono);
}

/* ============================================
   BASE STYLES
   ============================================ */
@layer base {
  *,
  *::before,
  *::after {
    box-sizing: border-box;
  }

  html {
    font-family: var(--font-sans);
    font-size: 16px;
    line-height: var(--leading-normal);
    color: var(--color-text);
    background: var(--color-bg);
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
  }

  body {
    margin: 0;
    min-height: 100vh;
  }

  /* Focus visible for keyboard users only */
  :focus:not(:focus-visible) {
    outline: none;
  }

  :focus-visible {
    outline: 2px solid var(--color-focus);
    outline-offset: 2px;
  }

  /* Reduced motion preference */
  @media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
    }
  }
}

/* ============================================
   UTILITY CLASSES
   ============================================ */
@layer utilities {
  /* Visually hidden but accessible */
  .sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border-width: 0;
  }

  /* Focus ring utility */
  .focus-ring {
    --tw-ring-color: var(--color-focus-ring);
    --tw-ring-offset-width: 2px;
  }

  .focus-ring:focus-visible {
    outline: none;
    box-shadow:
      0 0 0 var(--tw-ring-offset-width) var(--color-bg),
      0 0 0 calc(var(--tw-ring-offset-width) + 2px) var(--color-focus);
  }
}
